<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>NumAI - Dive Into Unknown</title>
    <link rel="icon" href="{{ url_for('static', filename='img/model-logos/milky-edge.svg') }}" type="image/svg+xml">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat-menu.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/settings.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/highlight.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/voice-bubble.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/voice-selection.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="/static/js/highlight-all.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/nord.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/ayu-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/solarized.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/one-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/meta.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/emmet/2.4.6/emmet.min.js"></script>
    <script src="https://unpkg.com/@emmetio/codemirror-plugin@1.2.0/dist/emmet-codemirror-plugin.js"></script>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/hint/show-hint.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/hint/anyword-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchtags.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/fold/xml-fold.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">

</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="header-content">
                <a href="">
                    <div class="logo">
                            <img src="{{ url_for('static', filename='img/model-logos/milky-edge.svg') }}"
                                alt="NumAI Logo" class="logo-image">
                    </div>
                </a>
                <div class="sidebar-toggle" data-tooltip="Toggle Sidebar">
                    <img src="{{ url_for('static', filename='img/sidebar-icon.svg') }}" alt="Toggle Sidebar">
                    </div>
                </div>
            </div>
            <div class="outer-new-chat">
                <div class="new-chat" data-tooltip="New Chat (Ctrl+I)">
                    <svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"
                        class="sidebar-icon">
                    
                        <rect x="8" y="8" width="48" height="48" rx="8" ry="8" fill="none" stroke-width="2" />

    
                        <path
                            d="M20 22H44C46 22 48 24 48 26V38C48 40 46 42 44 42L35 42L32 48L29 42H20C18 42 16 40 16 38V26C16 24 18 22 20 22Z"
                            fill="none" stroke-width="1.5" />

                        <line x1="26" y1="32" x2="38" y2="32" stroke-width="1.5" />
                        <line x1="32" y1="26" x2="32" y2="38" stroke-width="1.5" />

   
                        <path d="M14 16l0.5 1.5L16 18l-1.5 0.5L14 20l-0.5-1.5L12 18l1.5-0.5z" fill="none" />
                        <path d="M48 14l0.5 1L49 15.5l-0.5 0.5L48 17l-0.5-1L47 15.5l0.5-0.5z" fill="none" />
                        <path d="M50 46l0.3 0.7L51 47l-0.7 0.3L50 48l-0.3-0.7L49 47l0.7-0.3z" fill="none" />
                        <path d="M18 50l0.3 0.7L19 51l-0.7 0.3L18 52l-0.3-0.7L17 51l0.7-0.3z" fill="none" />
                    </svg>




                    <span>New Chat</span>
                </div>
            </div>
            <div class="chat-history">

                <div id="chat-item-template" style="display: none;">
                    <div class="chat-item" data-id="">
                        <span class="chat-title">Chat Title</span>
                        <div class="chat-actions">
                            <div class="chat-menu-toggle">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                            <div class="chat-menu">
                                <div class="chat-menu-item rename-chat">
                                    <i class="fas fa-edit"></i>
                                    <span>Rename</span>
                                </div>
                                <div class="chat-menu-item delete-chat">
                                    <i class="fas fa-trash"></i>
                                    <span>Delete</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="user-profile">
                <div class="user-info" style="cursor: pointer;" data-tooltip="Profile">
                    <div class="user-avatar">
                        <img id="user-avatar" src="" alt="User Avatar" class="avatar-image">
                        <div id="user-avatar-fallback" class="avatar-fallback">
                            <svg width="24" height="24" viewBox="0 0 24 24" class="sidebar-icon"
                                xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="8" r="5" />
                                <path d="M20 21c0-2.5-2-4.5-4.5-4.5S11 18.5 11 21" />
                    </svg>
                        </div>
                    </div>
                    <span id="user-name">User</span>
                </div>
                <button id="logout-btn" class="logout-btn" data-tooltip="Logout">
                    <svg width="64" height="64" viewBox="0 0 24 24" class="sidebar-icon"
                        xmlns="http://www.w3.org/2000/svg" fill="none" stroke="black" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="9" cy="7" r="4" />
                        <path d="M15 3h6v6" />
                        <path d="M10 14h11" />
                        <path d="M21 14l-3-3" />
                    </svg>
                </button>
            </div>
        </div>

        <div class="chat-section">
            <div class="mobile-toggle">
                <img src="{{ url_for('static', filename='img/sidebar-icon.svg') }}" alt="">
            </div>
            <div class="messages-container">
                <div class="messages" id="messages">
                    <div class="message system">
                        <div class="message-content">
                            <p>Hello! I'm NumAI. How can I help you today?</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-container">
                <div class="user-input-wrapper modern">
                    <div class="input-cont">
                        <div id="img-cont" class="img-cont">
                          
                            <div id="image-preview-container" class="image-preview-container" style="display: none;">
                                <img id="image-preview" src="" alt="Preview" class="image-preview">
                                <button id="remove-image-btn" class="remove-image-btn" title="Remove image">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="text-area">
                            <textarea id="user-input" placeholder="Ask me anything..." rows="1"></textarea>
                        </div>
                        <div class="multi-option">
               
                            <div class="imag-model">
                                <button id="image-upload-btn" class="action-btn image-upload-btn"
                                    data-tooltip="Upload Image (Comming Soon)">
                                    <i class="fas fa-image"></i>
                                </button>
                                <input type="file" id="image-upload" accept="image/*" style="display: none;">
                                <button id="thinking-toggle-btn" class="action-btn thinking-toggle-btn"
                                    data-tooltip="Deep Thinking: OFF (Ctrl+O)">
                                    <i class="fas fa-brain"></i>
                                </button>
                                <button id="model-switch-btn" class="action-btn model-switch-btn"
                                    data-tooltip="Switch AI Model">

                                    <div id="current-model-icon" class="current-model-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                         
                                            <path d="M12 4C14.5 4 16.75 5 18.25 6.75L19.75 5.25V10H15L17 8C15.75 6.5 14 6 12 6C9 6 6.5 8 6.07 11H4.05C4.54 6.97 7.92 4 12 4Z" fill="currentColor"/>
                                            
                        
                                            <path d="M12 20C9.5 20 7.25 19 5.75 17.25L4.25 18.75V14H9L7 16C8.25 17.5 10 18 12 18C15 18 17.5 16 17.93 13H19.95C19.46 17.03 16.08 20 12 20Z" fill="currentColor"/>
                                          </svg>
                                    </div>
                                </button>
                            </div>
                            <button class="action-btn stop-btn" style="display: none;" data-tooltip="Stop Generation">
                                <i class="fas fa-stop"></i>
                            </button>
                            <button class="action-btn send-btn" data-tooltip="Send Message">
                                <img src="{{ url_for('static', filename='img/arrow-icon.svg') }}" alt="Send"
                                    class="send-icon">
                            </button>
                        </div>
                    </div>
                </div>


                <div id="model-switcher-popup" class="model-switcher-popup" style="display: none;">
                    <div id="model-options-container" class="model-options-container">
                        <div class="model-category">
                            <div class="model-option" data-model-id="groq/llama3-8b">
                                <div class="model-option-info">
                                    <div class="model-option-name">NeuraNova-X</div>
                                    <div class="model-option-description">Best for Daily Task</div>
                                </div>
                            </div>
                            <div class="model-option" data-model-id="groq/llama3-70b">
                                <div class="model-option-info">
                                    <div class="model-option-name">SimulMind Vortex</div>
                                    <div class="model-option-description">Best for Daily Task</div>
                                </div>
                            </div>
                            <div class="model-option" data-model-id="cohere/command-r-plus">
                                <div class="model-option-info">
                                    <div class="model-option-name">Visionary Omega-9</div>
                                    <div class="model-option-description">Fast Responses</div>
                                </div>
                            </div>
                            <div class="model-option" data-model-id="cohere/command-r">
                                <div class="model-option-info">
                                    <div class="model-option-name">CogniSphere Atlas</div>
                                    <div class="model-option-description">Latest Small context Model</div>
                                </div>
                            </div>
                        </div>

                        <div class="model-category">
                            <h4 class="model-category-title">Reasoning</h4>
                            <div class="model-option" data-model-id="deepseek/deepseek-r1-0528:free">
                                <div class="model-option-info">
                                    <div class="model-option-name">SynthMind Zephyr</div>
                                    <div class="model-option-description">NumAI Best Advanced Model</div>
                                </div>
                            </div>
                            <div class="model-option" data-model-id="deepseek/deepseek-r1:free">
                                <div class="model-option-info">
                                    <div class="model-option-name">Mind Zephyr</div>
                                    <div class="model-option-description">NumAI Best Advanced Model</div>
                                </div>
                            </div>
                            <div class="model-option" data-model-id="deepseek/deepseek-chat-v3-0324:free">
                                <div class="model-option-info">
                                    <div class="model-option-name">QuantumText Maestro</div>
                                    <div class="model-option-description">Advanced reasoning and coding capabilities
                                    </div>
                                </div>
                            </div>
                            <div class="model-option" data-model-id="agentica-org/deepcoder-14b-preview:free">
                                <div class="model-option-info">
                                    <div class="model-option-name">CodeCascade Titan</div>
                                    <div class="model-option-description">Specialized for complex programming tasks
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div id="canvas-editor-container" style="display:none;"></div>

    <div id="settings-container" class="settings-container">
        <div class="settings-header">
            <h2>Settings</h2>
            <button id="close-settings" class="close-settings">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="settings-tabs">
            <div class="tab active" data-tab="general">General</div>
            <div class="tab" data-tab="profile">Profile</div>
            <div class="tab" data-tab="advanced">Advanced</div>
            <div class="tab" data-tab="about">About</div>
        </div>

        <div class="settings-content">

            <div class="tab-content active" id="general-tab">
                <div class="settings-section">
                    <h3>Theme</h3>
                    <div class="theme-selector">
                        <div class="theme-option" data-theme="dark">
                            <div class="theme-preview dark"></div>
                            <span>Dark</span>
                        </div>
                        <div class="theme-option" data-theme="light">
                            <div class="theme-preview light"></div>
                            <span>Light</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Language</h3>
                    <select id="language-selector" class="language-selector">
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                        <option value="zh">中文</option>
                    </select>
                </div>
            </div>

            <div class="tab-content" id="profile-tab">
                <div class="settings-section">
                    <h3>Account Information</h3>
                    <div class="profile-info">
                        <div class="profile-field">
                            <label>Name</label>
                            <div id="profile-name" class="profile-value">Loading...</div>
                        </div>
                        <div class="profile-field">
                            <label>Email</label>
                            <div id="profile-email" class="profile-value">Loading...</div>
                        </div>
                        <div class="profile-field">
                            <label>Plan</label>
                            <div id="profile-type" class="profile-value">Free</div>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Data Management</h3>
                    <div class="export-chats red-zone">
                        <p>Export Chats</p>
                        <button id="export-chats" class="settings-button">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                    <div class="delete-chats red-zone">
                        <p>Delete All Chats</p>
                        <button id="delete-all-chats" class="settings-button danger">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                    <div class="delete-account red-zone">
                        <p>Delete Account</p>
                        <button id="delete-account" class="settings-button danger">
                            <i class="fas fa-user-slash"></i> Delete
                        </button>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="advanced-tab">
                <div class="settings-section">
                    <h3><span>Voice</span></h3>
                    <div class="voice-se">
                        <p>Voices</p>
                        <button id="select-voice-btn" class="settings-button">Select Voice</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3><span>Read Aloud</span></h3>
                    <div class="toggle-container">
                        <label for="auto-speak-toggle">Speak response automatically</label>
                        <div class="toggle-switch">
                            <input type="checkbox" id="auto-speak-toggle">
                            <span class="toggle-slider"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="about-tab">
                <div class="settings-section">
                    <h3>About NumAI</h3>
                    <p>NumAI, providing intelligent conversational AI capabilities.</p>
                    <p>Current Model: <span id="current-model-display">Loading...</span></p>
                </div>

                <div class="settings-section">
                    <h3>Credits</h3>
                    <p>Developed by NumAI Team</p>
                    <p>© 2025 NumAI. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="voice-selection-modal" class="voice-selection-modal">
        <div class="voice-modal-content">
            <button id="close-voice-modal" class="close-modal-btn">&times;</button>


            <div class="voice-bubble-container">
                <div class="voice-bubble" id="voiceBubble">
                    <div class="smoke-container" id="smokeContainer">
                     
                    </div>

                    <div class="additional-smoke">
                        <div class="smoke-layer"></div>
                        <div class="smoke-layer"></div>
                        <div class="smoke-layer"></div>
                        <div class="smoke-layer"></div>
                        <div class="smoke-layer"></div>
                    </div>

                    <div class="bubble-content">
                      
                    </div>
                </div>
              
                <div id="current-voice-name" class="voice-name-display"></div>
            </div>


            <div class="voice-dropdown-container">
                <div class="voice-new-css">
                    <select id="voice-modal-select" class="voice-select">
                        <option value="en-US-AndrewMultilingualNeural">Andrew</option>
                        <option value="en-US-RogerNeural">Roger</option>
                        <option value="en-US-SteffanNeural">Jug</option>
                        <option value="en-US-AvaNeural">Freddy</option>
                        <option value="en-US-MichelleNeural">Fulfy</option>
                        <option value="en-US-AvaMultilingualNeural">Lua</option>
                        <option value="en-US-JennyNeural">Jenny</option>
                        <option value="en-US-SaraNeural">Sara</option>
                    </select>
                </div>
                <div class="done-new-c">
                    <button id="done-voice-btn" class="settings-button">
                        <i class="fas fa-check"></i> Done
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/emojis.js') }}"></script>
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <script src="{{ url_for('static', filename='js/firebase-chat.js') }}"></script>
    <script src="/static/js/marked.min.js"></script>
    <script src="{{ url_for('static', filename='js/highlight-all.min.js') }}"></script>
    <script src="/static/js/main.js"></script>
    <script src="{{ url_for('static', filename='js/settings.js') }}"></script>

    <script>

        document.getElementById('logout-btn').addEventListener('click', () => {
            firebase.auth().signOut().then(() => {
                window.location.href = '/login';
            }).catch((error) => {
                console.error('Logout error:', error);
            });
        });

        firebase.auth().onAuthStateChanged(user => {
            if (user) {
                verifyTokenOnce();

                const userNameElement = document.getElementById('user-name');
                if (userNameElement) {
                    userNameElement.textContent = user.displayName || user.email || 'User';
                }
            }
        });

        document.addEventListener("DOMContentLoaded", () => {
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            } else {
                console.warn('highlight-all.min.js not loaded, skipping syntax highlighting.');
            }
        });

    </script>
</body>

</html>